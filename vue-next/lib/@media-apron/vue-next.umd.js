(function(e,E){typeof exports=="object"&&typeof module<"u"?module.exports=E(require("vue")):typeof define=="function"&&define.amd?define(["vue"],E):(e=typeof globalThis<"u"?globalThis:e||self,e["@media-apron/vue-next"]=E(e.Vue))})(this,function(e){"use strict";const E=e.defineComponent({__name:"progress",props:{current:{type:Number,default:0},total:{type:Number,default:0}},emits:["change"],setup(a,{emit:r}){const n=e.ref(),s=e.ref(0),p=a,c=e.ref(!1),u=r,i=e.ref(0),d=e.ref(0);e.watch(()=>p.current,l=>{d.value=l/p.total*100,s.value=l},{deep:!0});const y=l=>{const t=h(l);F(t),c.value&&v(t)},_=()=>{c.value=!0};document.addEventListener("mousemove",l=>{c.value&&y(l)}),document.addEventListener("mouseup",()=>{const l=c.value;c.value=!1,l&&B()});const F=l=>{i.value=l},v=l=>{d.value=l,s.value=p.total*l/100},B=()=>{u("change",s.value)},h=l=>{const t=n.value.getBoundingClientRect(),f=t.width,o=(l.clientX-t.left)/f*100;return o<=0?0:o>=100?100:o};return(l,t)=>(e.openBlock(),e.createElementBlock("div",{class:"progress-container",onMouseout:t[0]||(t[0]=()=>{i.value=0}),onMousedown:_,onClick:t[1]||(t[1]=f=>{v(h(f)),B()})},[e.createElementVNode("div",{class:"progress",ref_key:"progressRef",ref:n},[e.createElementVNode("div",{class:"real-progress",style:e.normalizeStyle({width:d.value+"%"})},null,4),e.createElementVNode("div",{class:"target-progress",style:e.normalizeStyle({width:i.value+"%"})},null,4)],512)],32))}}),N=(a,r)=>{const n=a.__vccOpts||a;for(const[s,p]of r)n[s]=p;return n},w=N(E,[["__scopeId","data-v-14e9195d"]]),x={class:"volume-value"},M={class:"volume-text"},P=N(e.defineComponent({__name:"volume",props:{modelValue:{type:Number,default:100},isMuted:{type:Boolean,default:!1}},emits:["change","mutedToggle","modelValue"],setup(a,{emit:r}){const n=r,s=a,p=e.ref(),c=e.ref(!1),u=e.ref(2),i=e.ref(s.modelValue||100),d=e.ref(s.isMuted||!1);e.watch(()=>s.isMuted,t=>{d.value=t},{deep:!0}),e.onMounted(()=>{l(s.modelValue)});const y=t=>{const f=h(t);c.value&&F(f)},_=()=>{c.value=!0};document.addEventListener("mousemove",t=>{c.value&&y(t)}),document.addEventListener("mouseup",()=>{const t=c.value;c.value=!1,t&&B()});const F=t=>{i.value=t,l(t),n("change",{value:t}),t>0&&d.value&&(n("mutedToggle",!1),d.value=!1)},v=()=>{const t=!d.value;d.value=t,n("mutedToggle",t)},B=()=>{},h=t=>{const f=p.value.getBoundingClientRect(),k=f.width,m=(t.clientX-f.left)/k*100;return m<=0?0:m>=100?100:m},l=t=>{t<=30&&(u.value=0),t>30&&t<=65&&(u.value=1),t>65&&(u.value=2)};return(t,f)=>{const k=e.resolveComponent("ap-icon");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["volume-container",c.value?"volume-isdraging":""])},[e.createElementVNode("div",{class:"volume-button",onClick:v},[d.value||i.value<=0?(e.openBlock(),e.createBlock(k,{key:0,name:"volume-mute",color:"#FFFFFF"})):(e.openBlock(),e.createBlock(k,{key:1,name:`volume-${u.value}`,color:"#FFFFFF"},null,8,["name"]))]),e.createElementVNode("div",{class:"volume-value-container",ref_key:"progressRef",ref:p,onMousemove:y,onMousedown:_,onClick:f[0]||(f[0]=o=>{F(h(o))})},[e.createElementVNode("div",x,[e.createElementVNode("div",{class:"real-volume-value",style:e.normalizeStyle(`width: ${d.value?0:i.value}%`)},null,4)])],544),e.createElementVNode("div",M,e.toDisplayString(d.value?0:parseInt(i.value.toString()))+"% ",1)],2)}}}),[["__scopeId","data-v-59c5327d"]]),S=a=>{const r=Math.round(a),n=Math.floor(r/3600),s=r%3600,p=Math.floor(s/60),c=s%60;let u="";return n>0&&(u+=`${n.toString().padStart(2,"0")}:`),u+=`${p.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`,u},T=["src","playsinline","muted","autoplay","poster"],$={class:"controls-container"},z={class:"video-control"},R={class:"main-controls"},D={class:"element"},L={class:"append-controls"},q=["onClick"],A=["src"],b=e.defineComponent({name:"ApVideo",__name:"video",props:{source:{type:String||Array,default:""},poster:{type:String||null,default:null},mode:{type:String,default:"contain"},playsinline:{type:Boolean,default:!1},muted:{type:Boolean,default:!1},autoplay:{type:Boolean,default:!1},volume:{type:Number,default:100},buttons:{type:Array,default:["fullscreen"]},nextCallback:{type:Function||null,default:null}},setup(a){const r=a,n=e.ref();e.ref(!0);const s=e.ref("");e.ref(0);const p=e.ref([]),c=e.ref(!0),u=e.ref(r.volume||100),i=e.ref(r.autoplay||!1),d=e.ref(0),y=e.ref(0);(o=>{const m=r.source;if(typeof m=="string"){s.value=m,c.value=!0;return}if(m.length===1&&typeof m[0]=="string"){s.value=m[0],c.value=!0;return}p.value=m,s.value=m[0].url,c=!1})();const F=()=>{const o=!i.value;i.value=o,o?n.value.play():n.value.pause()},v=()=>{d.value=n.value.duration,y.value=n.value.currentTime},B=o=>{y.value=o,n.value.currentTime=o},h=({value:o})=>{n.value.volume=o/100,u.value=o},l=o=>{n.value.muted=o},t=()=>{i.value=r.autoplay||!1},f=()=>{};document.addEventListener("keydown",({key:o})=>{o===" "&&F()});const k=()=>{const o=n.value;document.fullscreenElement?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():o.requestFullscreen?o.requestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.webkitRequestFullscreen&&o.webkitRequestFullscreen()};return(o,m)=>{const V=e.resolveComponent("ap-icon");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["apron-video",i.value?"apron-playing-video":"apron-pausing-video"]),onDblclick:k},[e.createElementVNode("video",{ref_key:"videoRef",ref:n,src:s.value,style:e.normalizeStyle({objectFit:a.mode}),playsinline:a.playsinline,muted:a.muted,autoplay:a.autoplay,poster:a.poster,onEnded:t,onLoadedmetadata:v,onTimeupdate:v,controlslist:"nodownload"},null,44,T),e.createElementVNode("div",{class:"center-play-button",style:e.normalizeStyle(`opacity: ${i.value?0:1}; cursor: ${i.value?"":"pointer"}`),onClick:F},[e.createVNode(V,{name:"play",color:"#FFFFFF",size:30})],4),e.createElementVNode("div",$,[e.createVNode(w,{style:{"margin-bottom":"10px"},current:y.value,total:d.value,onChange:B},null,8,["current","total"]),e.createElementVNode("div",z,[e.createElementVNode("div",R,[e.createElementVNode("div",{class:"element button",onClick:F},[i.value?(e.openBlock(),e.createBlock(V,{key:0,name:"pause",color:"#FFFFFF"})):(e.openBlock(),e.createBlock(V,{key:1,name:"play",color:"#FFFFFF"}))]),a.nextCallback?(e.openBlock(),e.createElementBlock("div",{key:0,class:"element button",onClick:f},[e.createVNode(V,{name:"next",color:"#FFFFFF"})])):e.createCommentVNode("",!0),e.createElementVNode("div",D,e.toDisplayString(e.unref(S)(y.value))+"/"+e.toDisplayString(e.unref(S)(d.value)),1)]),e.createElementVNode("div",L,[e.createVNode(P,{"is-muted":a.muted,modelValue:u.value,"onUpdate:modelValue":m[0]||(m[0]=g=>u.value=g),onChange:h,onMutedToggle:l,class:"element"},null,8,["is-muted","modelValue"]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.buttons,(g,I)=>(e.openBlock(),e.createElementBlock("div",{class:"element",key:`video-button-${I}`},[(g.hasOwnProperty("icon")||g.hasOwnProperty("image"))&&g.hasOwnProperty("callback")?(e.openBlock(),e.createElementBlock("div",{key:0,class:"button",onClick:g.callback},[g.image?(e.openBlock(),e.createElementBlock("img",{key:0,src:g.image},null,8,A)):g.icon?(e.openBlock(),e.createBlock(V,{key:1,name:g.icon,color:"#FFFFFF"},null,8,["name"])):(e.openBlock(),e.createBlock(V,{key:2,name:"flame",color:"#FFFFFF"}))],8,q)):e.createCommentVNode("",!0),g==="fullscreen"?(e.openBlock(),e.createElementBlock("div",{key:1,class:"element button",onClick:k},[e.createVNode(V,{name:"fullscreen",color:"#FFFFFF"})])):e.createCommentVNode("",!0)]))),128))])])])],34)}}}),O=[b],C=function(a){if(C.installed)return!1;O.map(r=>a.component(r.name,r))};return typeof window<"u"&&window.Vue&&C(window.Vue),{install:C,Video:b}});
